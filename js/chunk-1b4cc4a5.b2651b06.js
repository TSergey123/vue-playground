(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b4cc4a5"],{"6fb0":function(e,t,o){"use strict";o.r(t);var n=o("7a23"),c=function(e){return Object(n["w"])("data-v-a19a1ede"),e=e(),Object(n["u"])(),e},a={class:"home"},r=Object(n["i"])("LIKE"),s=c((function(){return Object(n["h"])("h1",null,"PostPageComposition",-1)})),u=c((function(){return Object(n["h"])("h1",null,"Страница с постами",-1)})),i={class:"home__buttons"},l=Object(n["i"])("Создать Пост"),d=Object(n["i"])("Создать"),b={ref:"observer",class:"observer"},j=c((function(){return Object(n["h"])("h3",{class:"observer__title"},"Загрузка страницы...",-1)})),O=[j];function f(e,t,o,c,j,f){var p=Object(n["B"])("my-button"),h=Object(n["B"])("my-input"),v=Object(n["B"])("my-select"),m=Object(n["B"])("post-form"),y=Object(n["B"])("my-dialog"),g=Object(n["B"])("post-list"),P=Object(n["B"])("my-loader"),k=Object(n["C"])("focus"),w=Object(n["C"])("intersection");return Object(n["t"])(),Object(n["g"])("div",a,[Object(n["h"])("h1",null,Object(n["E"])(c.likes),1),Object(n["h"])("h1",null,Object(n["E"])(e.$store.state.isAuth?"Пользователь авторизован":"Необходимо Авторизоваться"),1),Object(n["j"])(p,{onClick:c.addLike},{default:Object(n["J"])((function(){return[r]})),_:1},8,["onClick"]),s,u,Object(n["K"])(Object(n["j"])(h,{modelValue:c.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.searchQuery=e}),placeholder:"Поиск"},null,8,["modelValue"]),[[k]]),Object(n["h"])("div",i,[Object(n["j"])(v,{modelValue:c.selectedSort,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.selectedSort=e}),options:j.sortOptions},null,8,["modelValue","options"]),Object(n["j"])(p,{onClick:e.showDialog,style:{margin:"15px 0"}},{default:Object(n["J"])((function(){return[l]})),_:1},8,["onClick"])]),Object(n["j"])(p,{style:{margin:"15px 0"},onClick:e.showDialog},{default:Object(n["J"])((function(){return[d]})),_:1},8,["onClick"]),Object(n["j"])(y,{show:j.dialogVisible,"onUpdate:show":t[2]||(t[2]=function(e){return j.dialogVisible=e})},{default:Object(n["J"])((function(){return[Object(n["j"])(m,{onCreate:e.createPost},null,8,["onCreate"])]})),_:1},8,["show"]),c.isPostLoading?(Object(n["t"])(),Object(n["e"])(P,{key:1})):(Object(n["t"])(),Object(n["e"])(g,{key:0,posts:c.sortedAndSearchedPosts,onRemove:e.removePost},null,8,["posts","onRemove"])),Object(n["K"])((Object(n["t"])(),Object(n["g"])("div",b,O)),[[w,e.loadMorePosts],[n["H"],this.page<this.totalPages]])])}var p=o("1f6c"),h=o("3e89"),v=o("0026"),m=o("b866"),y=o("1703"),g=o("37b4"),P=o("1b41"),k=o("1da1"),w=(o("96cf"),o("bc3a")),C=o.n(w);function _(e){var t=Object(n["y"])([]),o=Object(n["y"])(0),c=Object(n["y"])(!0),a=function(){var n=Object(k["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,C.a.get("https://jsonplaceholder.typicode.com/posts",{params:{_page:1,_limit:e}});case 3:a=n.sent,o.value=Math.ceil(a.headers["x-total-count"]/e),t.value=a.data,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),alert("Ошибка");case 11:return n.prev=11,c.value=!1,n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[0,8,11,14]])})));return function(){return n.apply(this,arguments)}}();return Object(n["r"])(a),{posts:t,isPostsLoading:c,totalPages:o}}var L=o("2909");o("4e82");function S(e){var t=Object(n["y"])(""),o=Object(n["c"])((function(){return Object(L["a"])(e.value).sort((function(e,o){var n;return null===(n=e[t.value])||void 0===n?void 0:n.localeCompare(o[t.value])}))}));return{selectedSort:t,sortedPosts:o}}o("4de4"),o("d3b7"),o("caad"),o("2532");function V(e){var t=Object(n["y"])(""),o=Object(n["c"])((function(){return e.value.filter((function(e){return e.title.toLowerCase().includes(t.value.toLowerCase())}))}));return{searchQuery:t,sortedAndSearchedPosts:o}}var B={name:"PostsPage",components:{PostList:p["a"],PostForm:h["a"],MyDialog:v["a"],MyButton:m["a"],MyLoader:y["a"],MySelect:g["a"],MyInput:P["a"]},data:function(){return{isAuth:!1,dialogVisible:!1,sortOptions:[{value:"title",name:"По названию"},{value:"body",name:"По содержанию"}]}},setup:function(){var e=_(10),t=e.posts,o=e.totalPages,c=e.isPostLoading,a=S(t),r=a.sortedPosts,s=a.selectedSort,u=V(r),i=u.searchQuery,l=u.sortedAndSearchedPosts,d=Object(n["y"])(0),b=function(){d.value+=1};return{posts:t,totalPages:o,isPostLoading:c,sortedPosts:r,selectedSort:s,searchQuery:i,sortedAndSearchedPosts:l,likes:d,addLike:b}}},M=(o("7f50"),o("6b0d")),x=o.n(M);const A=x()(B,[["render",f],["__scopeId","data-v-a19a1ede"]]);t["default"]=A},"7f50":function(e,t,o){"use strict";o("805a")},"805a":function(e,t,o){}}]);
//# sourceMappingURL=chunk-1b4cc4a5.b2651b06.js.map