{"version":3,"sources":["webpack:///./src/views/PostPageComposition.vue","webpack:///./src/hooks/usePosts.js","webpack:///./src/hooks/useSortedPosts.js","webpack:///./src/hooks/useSortedAndSearchedPosts.js","webpack:///./src/views/PostPageComposition.vue?84fa","webpack:///./src/views/PostPageComposition.vue?ed04"],"names":["class","ref","likes","$store","state","isAuth","addLike","searchQuery","placeholder","selectedSort","options","sortOptions","showDialog","style","show","dialogVisible","createPost","isPostLoading","posts","sortedAndSearchedPosts","removePost","loadMorePosts","page","totalPages","usePosts","limit","isPostsLoading","fetching","axios","get","params","_page","_limit","response","value","Math","ceil","headers","data","alert","onMounted","useSortedPosts","sortedPosts","computed","sort","post1","post2","localeCompare","filter","post","title","toLowerCase","includes","name","components","PostList","PostForm","MyDialog","MyButton","MyLoader","MySelect","MyInput","setup","__exports__","render"],"mappings":"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","file":"js/chunk-1b4cc4a5.b2651b06.js","sourcesContent":["<template>\n  <div class=\"home\">\n    <h1>{{likes}}</h1>\n    <h1>{{ $store.state.isAuth ? 'Пользователь авторизован' : \"Необходимо Авторизоваться\" }}</h1>\n    <my-button @click=\"addLike\">LIKE</my-button>\n    <h1>PostPageComposition</h1>\n    <h1>Страница с постами</h1>\n    <my-input v-focus v-model=\"searchQuery\" placeholder=\"Поиск\" />\n    <div class=\"home__buttons\">\n      <my-select v-model=\"selectedSort\" :options=\"sortOptions\" />\n      <my-button @click=\"showDialog\" style=\"margin: 15px 0;\">Создать Пост</my-button>\n    </div>\n    <my-button style=\"margin: 15px 0;\" @click=\"showDialog\">Создать</my-button>\n    <my-dialog v-model:show=\"dialogVisible\">\n      <post-form @create=\"createPost\" />\n    </my-dialog>\n    <post-list :posts=\"sortedAndSearchedPosts\" @remove=\"removePost\" v-if=\"!isPostLoading\" />\n    <my-loader v-else />\n    <div\n     v-intersection=\"loadMorePosts\"\n     ref=\"observer\" class=\"observer\"\n     v-show=\"this.page < this.totalPages\"\n     >\n      <h3 class=\"observer__title\">Загрузка страницы...</h3>\n    </div>\n  </div>\n</template>\n\n<script>\n// import fetchMixin from '@/mixins/fetchMixin';\nimport { ref } from 'vue';\nimport PostList from '@/components/PostList.vue';\nimport PostForm from '@/components/PostForm.vue';\nimport MyDialog from '@/components/UI/MyDialog.vue';\nimport MyButton from '@/components/UI/MyButton.vue';\nimport MyLoader from '@/components/UI/MyLoader.vue';\nimport MySelect from '@/components/UI/MySelect.vue';\nimport MyInput from '@/components/UI/MyInput.vue';\nimport { usePosts } from '@/hooks/usePosts';\nimport useSortedPosts from '@/hooks/useSortedPosts';\nimport useSortedAndSearchedPosts from '@/hooks/useSortedAndSearchedPosts';\n\nexport default {\n  name: 'PostsPage',\n  // mixins: [fetchMixin],\n  components: {\n    PostList,\n    PostForm,\n    MyDialog,\n    MyButton,\n    MyLoader,\n    MySelect,\n    MyInput,\n  },\n  data() {\n    return {\n      isAuth: false,\n      dialogVisible: false,\n      sortOptions: [\n        { value: 'title', name: 'По названию' },\n        { value: 'body', name: 'По содержанию' },\n      ],\n    };\n  },\n  setup() {\n    const { posts, totalPages, isPostLoading } = usePosts(10);\n    const { sortedPosts, selectedSort } = useSortedPosts(posts);\n    const { searchQuery, sortedAndSearchedPosts } = useSortedAndSearchedPosts(sortedPosts);\n    const likes = ref(0);\n    const addLike = () => {\n      likes.value += 1;\n    };\n    return {\n      posts,\n      totalPages,\n      isPostLoading,\n      sortedPosts,\n      selectedSort,\n      searchQuery,\n      sortedAndSearchedPosts,\n      likes,\n      addLike,\n    };\n  },\n};\n</script>\n\n<style scoped>\n.home__buttons {\n  margin: 15px 0;\n  display: flex;\n  flex-direction: column;\n}\n.home__pages-wrapper {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  margin: 15px 0;\n}\n\n.home__pages {\n  border: 1px solid black;\n  padding: 10px;\n  cursor: pointer;\n}\n\n.current-page {\n  border: 2px solid teal;\n  color: red;\n}\n\n.observer {\n  height: 30px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  margin: 15px 0;\n}\n\n.observer__title {\n  color: Teal;\n  text-transform: uppercase;\n}\n</style>\n","import axios from 'axios';\nimport {\n  ref,\n  onMounted,\n} from 'vue';\n\n// eslint-disable-next-line import/prefer-default-export\nexport function usePosts(limit) {\n  const posts = ref([]);\n  const totalPages = ref(0);\n  const isPostsLoading = ref(true);\n  const fetching = async () => {\n    try {\n      const response = await axios.get('https://jsonplaceholder.typicode.com/posts', {\n        params: {\n          _page: 1,\n          _limit: limit,\n        },\n      });\n      totalPages.value = Math.ceil(response.headers['x-total-count'] / limit);\n      posts.value = response.data;\n    } catch (e) {\n      // eslint-disable-next-line no-alert\n      alert('Ошибка');\n    } finally {\n      isPostsLoading.value = false;\n    }\n  };\n\n  onMounted(fetching);\n\n  return {\n    posts,\n    isPostsLoading,\n    totalPages,\n  };\n}\n","import {\n  ref,\n  computed,\n} from 'vue';\n\nexport default function useSortedPosts(posts) {\n  const selectedSort = ref('');\n  const sortedPosts = computed(() => [...posts.value]\n    .sort((post1, post2) => post1[selectedSort\n      .value]?.localeCompare(post2[selectedSort.value])));\n\n  return {\n    selectedSort,\n    sortedPosts,\n  };\n}\n","import {\n  ref,\n  computed,\n} from 'vue';\n\nexport default function useSortedPosts(sortedPosts) {\n  const searchQuery = ref('');\n\n  const sortedAndSearchedPosts = computed(() => sortedPosts\n    .value.filter((post) => post.title.toLowerCase().includes(searchQuery.value\n      .toLowerCase())));\n\n  return {\n    searchQuery,\n    sortedAndSearchedPosts,\n  };\n}\n","import { render } from \"./PostPageComposition.vue?vue&type=template&id=a19a1ede&scoped=true\"\nimport script from \"./PostPageComposition.vue?vue&type=script&lang=js\"\nexport * from \"./PostPageComposition.vue?vue&type=script&lang=js\"\n\nimport \"./PostPageComposition.vue?vue&type=style&index=0&id=a19a1ede&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/sergeytoporkov/Documents/vsCodeProjects/vue-playground/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a19a1ede\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PostPageComposition.vue?vue&type=style&index=0&id=a19a1ede&scoped=true&lang=css\""],"sourceRoot":""}