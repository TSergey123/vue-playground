(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22f67d63"],{"1c17":function(t,e,o){"use strict";o.r(e);var s=o("7a23"),n=function(t){return Object(s["w"])("data-v-4d164e9c"),t=t(),Object(s["u"])(),t},a={class:"home"},r=n((function(){return Object(s["h"])("h1",null,"Страница с постами",-1)})),c={class:"home__buttons"},i=Object(s["i"])("Создать Пост"),u=Object(s["i"])("Создать"),l={ref:"observer",class:"observer"},d=n((function(){return Object(s["h"])("h3",{class:"observer__title"},"Загрузка страницы...",-1)})),b=[d];function p(t,e,o,n,d,p){var h=Object(s["B"])("my-input"),f=Object(s["B"])("my-select"),j=Object(s["B"])("my-button"),m=Object(s["B"])("post-form"),O=Object(s["B"])("my-dialog"),g=Object(s["B"])("post-list"),v=Object(s["B"])("my-loader"),P=Object(s["C"])("focus"),w=Object(s["C"])("intersection");return Object(s["t"])(),Object(s["g"])("div",a,[r,Object(s["K"])(Object(s["j"])(h,{modelValue:t.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.searchQuery=e}),placeholder:"Поиск"},null,8,["modelValue"]),[[P]]),Object(s["h"])("div",c,[Object(s["j"])(f,{modelValue:t.selectedSort,"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.selectedSort=e}),options:t.sortOptions},null,8,["modelValue","options"]),Object(s["j"])(j,{onClick:t.showDialog,style:{margin:"15px 0"}},{default:Object(s["J"])((function(){return[i]})),_:1},8,["onClick"])]),Object(s["j"])(j,{style:{margin:"15px 0"},onClick:t.showDialog},{default:Object(s["J"])((function(){return[u]})),_:1},8,["onClick"]),Object(s["j"])(O,{show:t.dialogVisible,"onUpdate:show":e[2]||(e[2]=function(e){return t.dialogVisible=e})},{default:Object(s["J"])((function(){return[Object(s["j"])(m,{onCreate:t.createPost},null,8,["onCreate"])]})),_:1},8,["show"]),t.isPostLoading?(Object(s["t"])(),Object(s["e"])(v,{key:1})):(Object(s["t"])(),Object(s["e"])(g,{key:0,posts:t.sortedAndSearchedPosts,onRemove:t.removePost},null,8,["posts","onRemove"])),Object(s["K"])((Object(s["t"])(),Object(s["g"])("div",l,b)),[[w,t.loadMorePosts],[s["H"],this.page<this.totalPages]])])}var h=o("9585"),f=o("1f6c"),j=o("3e89"),m=o("0026"),O=o("b866"),g=o("1703"),v=o("37b4"),P=o("1b41"),w={name:"PostsPage",mixins:[h["a"]],components:{PostList:f["a"],PostForm:j["a"],MyDialog:m["a"],MyButton:O["a"],MyLoader:g["a"],MySelect:v["a"],MyInput:P["a"]}},y=(o("b19b"),o("6b0d")),k=o.n(y);const _=k()(w,[["render",p],["__scopeId","data-v-4d164e9c"]]);e["default"]=_},"2e1d":function(t,e,o){},9585:function(t,e,o){"use strict";var s=o("2909"),n=o("1da1"),a=(o("96cf"),o("4de4"),o("d3b7"),o("99af"),o("4e82"),o("caad"),o("2532"),o("bc3a")),r=o.n(a);e["a"]={data:function(){return{posts:[],dialogVisible:!1,isPostLoading:!1,selectedSort:"",searchQuery:"",page:1,limit:10,totalPages:0,sortOptions:[{value:"title",name:"По названию"},{value:"body",name:"По содержанию"}]}},methods:{createPost:function(t){this.posts.push(t),this.dialogVisible=!1},removePost:function(t){this.posts=this.posts.filter((function(e){return e.id!==t.id}))},showDialog:function(){this.dialogVisible=!0},fetchPosts:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.get("https://jsonplaceholder.typicode.com/posts",{params:{_page:t.page,_limit:t.limit}});case 3:o=e.sent,t.posts=o.data,t.totalPages=Math.ceil(o.headers["x-total-count"]/t.limit),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),alert("Error"),t.isPostLoading=!0;case 12:return e.prev=12,t.isPostsLoading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})))()},loadMorePosts:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.page+=1,e.next=4,r.a.get("https://jsonplaceholder.typicode.com/posts",{params:{_page:t.page,_limit:t.limit}});case 4:o=e.sent,t.totalPages=Math.ceil(o.headers["x-total-count"]/t.limit),t.posts=[].concat(Object(s["a"])(t.posts),Object(s["a"])(o.data)),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),alert("Error"),t.isPostLoading=!0;case 13:return e.prev=13,t.isPostsLoading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})))()}},mounted:function(){this.fetchPosts()},computed:{sortedPosts:function(){var t=this;return Object(s["a"])(this.posts).sort((function(e,o){var s;return null===(s=e[t.selectedSort])||void 0===s?void 0:s.localeCompare(o[t.selectedSort])}))},sortedDate:function(){return Object(s["a"])(this.sortedPosts).sort((function(t,e){return new Date(t.date)-new Date(e.date)}))},sortedAndSearchedPosts:function(){var t=this;return this.sortedDate.filter((function(e){return e.title.toLowerCase().includes(t.searchQuery)}))}},watch:{}}},b19b:function(t,e,o){"use strict";o("2e1d")}}]);
//# sourceMappingURL=chunk-22f67d63.f79db5cd.js.map