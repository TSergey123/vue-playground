{"version":3,"sources":["webpack:///./src/views/PostsPage.vue","webpack:///./src/views/PostsPage.vue?4eb7","webpack:///./src/mixins/fetchMixin.js","webpack:///./src/views/PostsPage.vue?0930"],"names":["class","ref","searchQuery","placeholder","selectedSort","options","sortOptions","showDialog","style","show","dialogVisible","createPost","isPostLoading","posts","sortedAndSearchedPosts","removePost","loadMorePosts","page","totalPages","name","mixins","fetchMixin","components","PostList","PostForm","MyDialog","MyButton","MyLoader","MySelect","MyInput","__exports__","render","data","limit","value","methods","post","this","push","filter","p","id","fetchPosts","axios","get","params","_page","_limit","response","Math","ceil","headers","alert","isPostsLoading","mounted","computed","sortedPosts","sort","post1","post2","localeCompare","sortedDate","a","b","Date","date","title","toLowerCase","includes","watch"],"mappings":"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","file":"js/chunk-22f67d63.f79db5cd.js","sourcesContent":["<template>\n  <div class=\"home\">\n    <h1>Страница с постами</h1>\n    <my-input v-focus v-model=\"searchQuery\" placeholder=\"Поиск\" />\n    <div class=\"home__buttons\">\n      <my-select v-model=\"selectedSort\" :options=\"sortOptions\" />\n      <my-button @click=\"showDialog\" style=\"margin: 15px 0;\">Создать Пост</my-button>\n    </div>\n    <my-button style=\"margin: 15px 0;\" @click=\"showDialog\">Создать</my-button>\n    <my-dialog v-model:show=\"dialogVisible\">\n      <post-form @create=\"createPost\" />\n    </my-dialog>\n    <post-list :posts=\"sortedAndSearchedPosts\" @remove=\"removePost\" v-if=\"!isPostLoading\" />\n    <my-loader v-else />\n    <div\n     v-intersection=\"loadMorePosts\"\n     ref=\"observer\" class=\"observer\"\n     v-show=\"this.page < this.totalPages\"\n     >\n      <h3 class=\"observer__title\">Загрузка страницы...</h3>\n    </div>\n    <!-- <div class=\"home__pages-wrapper\">\n      <div\n        class=\"home__pages\"\n        v-for=\"pageNumber in totalPages\"\n        :key=\"pageNumber\"\n        :class=\"{ 'current-page': page === pageNumber }\"\n        @click=\"changePage\"\n      >{{ pageNumber }}</div>\n    </div>-->\n  </div>\n</template>\n\n<script>\nimport fetchMixin from '@/mixins/fetchMixin';\nimport PostList from '@/components/PostList.vue';\nimport PostForm from '@/components/PostForm.vue';\nimport MyDialog from '@/components/UI/MyDialog.vue';\nimport MyButton from '@/components/UI/MyButton.vue';\nimport MyLoader from '@/components/UI/MyLoader.vue';\nimport MySelect from '@/components/UI/MySelect.vue';\nimport MyInput from '@/components/UI/MyInput.vue';\n\nexport default {\n  name: 'PostsPage',\n  mixins: [fetchMixin],\n  components: {\n    PostList,\n    PostForm,\n    MyDialog,\n    MyButton,\n    MyLoader,\n    MySelect,\n    MyInput,\n  },\n};\n</script>\n\n<style scoped>\n.home__buttons {\n  margin: 15px 0;\n  display: flex;\n  flex-direction: column;\n}\n.home__pages-wrapper {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  margin: 15px 0;\n}\n\n.home__pages {\n  border: 1px solid black;\n  padding: 10px;\n  cursor: pointer;\n}\n\n.current-page {\n  border: 2px solid teal;\n  color: red;\n}\n\n.observer {\n  height: 30px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  margin: 15px 0;\n}\n\n.observer__title {\n  color: Teal;\n  text-transform: uppercase;\n}\n</style>\n","import { render } from \"./PostsPage.vue?vue&type=template&id=4d164e9c&scoped=true\"\nimport script from \"./PostsPage.vue?vue&type=script&lang=js\"\nexport * from \"./PostsPage.vue?vue&type=script&lang=js\"\n\nimport \"./PostsPage.vue?vue&type=style&index=0&id=4d164e9c&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/sergeytoporkov/Documents/vsCodeProjects/vue-playground/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4d164e9c\"]])\n\nexport default __exports__","import axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      posts: [],\n      dialogVisible: false,\n      isPostLoading: false,\n      selectedSort: '',\n      searchQuery: '',\n      page: 1,\n      limit: 10,\n      totalPages: 0,\n      sortOptions: [\n        { value: 'title', name: 'По названию' },\n        { value: 'body', name: 'По содержанию' },\n      ],\n    };\n  },\n  methods: {\n    createPost(post) {\n      this.posts.push(post);\n      this.dialogVisible = false;\n    },\n    removePost(post) {\n      this.posts = this.posts.filter((p) => p.id !== post.id);\n    },\n    showDialog() {\n      this.dialogVisible = true;\n    },\n    // changePage(pageNumber) {\n    //   this.page = pageNumber;\n    // },\n    async fetchPosts() {\n      try {\n        const response = await axios.get('https://jsonplaceholder.typicode.com/posts', {\n          params: {\n            _page: this.page,\n            _limit: this.limit,\n          },\n        });\n        this.posts = response.data;\n        this.totalPages = Math.ceil(response.headers['x-total-count'] / this.limit);\n      } catch (e) {\n        // eslint-disable-next-line no-alert\n        alert('Error');\n        this.isPostLoading = true;\n      } finally {\n        this.isPostsLoading = false;\n      }\n    },\n    async loadMorePosts() {\n      try {\n        this.page += 1;\n        const response = await axios.get('https://jsonplaceholder.typicode.com/posts', {\n          params: {\n            _page: this.page,\n            _limit: this.limit,\n          },\n        });\n        this.totalPages = Math.ceil(response.headers['x-total-count'] / this.limit);\n        this.posts = [...this.posts, ...response.data];\n      } catch (e) {\n        // eslint-disable-next-line no-alert\n        alert('Error');\n        this.isPostLoading = true;\n      } finally {\n        this.isPostsLoading = false;\n      }\n    },\n  },\n  mounted() {\n    this.fetchPosts();\n  },\n  computed: {\n    sortedPosts() {\n      // eslint-disable-next-line max-len\n      return [...this.posts].sort((post1, post2) => post1[this.selectedSort]?.localeCompare(post2[this.selectedSort]));\n    },\n    sortedDate() {\n      return [...this.sortedPosts].sort((a, b) => new Date(a.date) - new Date(b.date));\n    },\n    sortedAndSearchedPosts() {\n      return this.sortedDate.filter((post) => post.title.toLowerCase().includes(this.searchQuery));\n    },\n  },\n  watch: {\n    // page() {\n    //   this.fetchPosts();\n    // },\n  },\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PostsPage.vue?vue&type=style&index=0&id=4d164e9c&scoped=true&lang=css\""],"sourceRoot":""}